const nav=document.querySelector(".section-nav"),rail=nav.querySelector(".section-nav__rail"),thumb=nav.querySelector("#sectionThumb"),controls=[...nav.querySelectorAll("[data-target]")];let scrollingTo=null;function moveThumb(t){const e=t.getBoundingClientRect(),o=rail.getBoundingClientRect(),n=e.top-o.top+e.height/2-thumb.offsetHeight/2;thumb.style.top=`${n}px`}function activate(t,e=!0){const o=controls[t],n=document.querySelector(o.dataset.target);n&&(e&&(scrollingTo=n.id),n.scrollIntoView({behavior:e?"smooth":"auto"}),controls.forEach(t=>t.classList.remove("active")),o.classList.add("active"),moveThumb(o))}controls.forEach((t,e)=>t.addEventListener("click",()=>activate(e)));const observer=new IntersectionObserver(t=>{t.forEach(t=>{if(scrollingTo)t.isIntersecting&&t.target.id===scrollingTo&&(scrollingTo=null);else if(t.isIntersecting){const e=controls.findIndex(e=>e.dataset.target===`#${t.target.id}`);-1!==e&&activate(e,!1)}})},{threshold:.6});controls.forEach(t=>{const e=document.querySelector(t.dataset.target);e&&observer.observe(e)}),window.addEventListener("load",()=>moveThumb(controls[0]));